language: python

git:
  depth: 1

python:
  - "2.7"
  - "3.6"
  - "3.7"
  - "3.8"

install:
  - sudo pip install urllib3 pyOpenSSL ndg-httpsclient pyasn1
  - sudo apt-get purge -y mysql-common mysql-server mysql-client
  - mkdir -p ~/.bench
  - mkdir -p /tmp/.bench
  - cp -r $TRAVIS_BUILD_DIR/* ~/.bench
  - cp -r $TRAVIS_BUILD_DIR/* /tmp/.bench

    # easy install run
  - python $TRAVIS_BUILD_DIR/playbooks/install.py --user travis --run-travis --production --verbose

script:
  - pip install -e ~/.bench
  - python -m unittest -v bench.tests.test_setup_production
